(function(e){function t(t){for(var n,i,l=t[0],u=t[1],c=t[2],d=0,p=[];d<l.length;d++)i=l[d],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&p.push(a[i][0]),a[i]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(e[n]=u[n]);s&&s(t);while(p.length)p.shift()();return o.push.apply(o,c||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],n=!0,l=1;l<r.length;l++){var u=r[l];0!==a[u]&&(n=!1)}n&&(o.splice(t--,1),e=i(i.s=r[0]))}return e}var n={},a={app:0},o=[];function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=n,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=t,l=l.slice();for(var c=0;c<l.length;c++)t(l[c]);var s=u;o.push([1,"chunk-vendors"]),r()})({0:function(e,t){},"034f":function(e,t,r){"use strict";r("85ec")},1:function(e,t,r){e.exports=r("56d7")},2:function(e,t){},3:function(e,t){},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("el-container",[r("el-main",[r("el-row",{attrs:{type:"flex",justify:"space-between"}},[r("el-form",{attrs:{inline:!0,model:e.query,size:"small"}},[e._l(e.searchField,(function(t){return r("el-form-item",{key:t._id,attrs:{label:t.fieldName}},[r("el-input",{attrs:{placeholder:t.fieldName},model:{value:e.query[t.column],callback:function(r){e.$set(e.query,t.column,r)},expression:"query[field.column]"}})],1)})),r("el-form-item",[r("el-button",{attrs:{type:"plain",icon:"el-icon-search",size:"small"},on:{click:e.onSearch}},[e._v("搜索")])],1)],2)],1),r("el-row",{attrs:{type:"flex",justify:"start"}},[r("el-button",{attrs:{type:"plain",icon:"el-icon-plus",size:"small"},on:{click:e.doAddRecord}},[e._v("添加")]),r("el-button",{attrs:{type:"plain",icon:"el-icon-edit",size:"small"},on:{click:e.doEditRecord}},[e._v("修改")]),r("el-button",{attrs:{type:"plain",icon:"el-icon-delete",size:"small"},on:{click:e.doDeleleRecord}},[e._v("删除")]),r("el-button",{attrs:{type:"plain",icon:"el-icon-upload2",size:"small"},on:{click:e.doExportRecords}},[e._v("导出")])],1),r("el-row",{staticClass:"table-field"},[r("el-table",{ref:"singleTable",staticStyle:{width:"100%"},attrs:{border:"",data:e.tableData,"highlight-current-row":"",size:"small"},on:{"current-change":e.handleSelectChange}},[r("el-table-column",{attrs:{type:"index",width:"50"}}),e._l(e.tableField,(function(e){return r("el-table-column",{key:e._id,attrs:{prop:e.column,label:e.fieldName,"show-overflow-tooltip":""}})}))],2)],1),r("el-row",{staticClass:"pagination-field",attrs:{type:"flex",justify:"start"}},[r("el-pagination",{attrs:{"page-sizes":[10,25,50,100],layout:"total, sizes, prev, pager, next, jumper",total:e.recordTotal},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),r("el-row",{attrs:{type:"flex",justify:"start"}},[r("el-dialog",{attrs:{title:e.dialogFormTitle,visible:e.dialogFormVisible,"custom-class":"dialog-form"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[r("el-form",{attrs:{model:e.dialogForm}},e._l(e.tableField,(function(t){return r("el-form-item",{key:t._id,attrs:{label:t.fieldName,"label-width":e.formLabelWidth}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.dialogForm[t.column],callback:function(r){e.$set(e.dialogForm,t.column,r)},expression:"dialogForm[field.column]"}})],1)})),1),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"plain",icon:"el-icon-check",size:"small"},on:{click:e.doDialogFormSave}},[e._v("保存")]),r("el-button",{attrs:{type:"plain",icon:"el-icon-close",size:"small"},on:{click:e.doDialogFormCancel}},[e._v("退出")])],1)],1)],1)],1)],1)],1)},o=[],i=r("1da1"),l=(r("ac1f"),r("841c"),r("e9c4"),r("96cf"),r("d4ec")),u=r("bee2"),c=r("bc3a"),s=r.n(c),d={baseURL:"/",timeout:5e3,crossDomain:!0,validateStatus:function(e){return e>=200&&e<510}},p=s.a.create(d);function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return p({method:"post",url:e,data:t,params:r})}function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return p({method:"get",url:e,params:t})}var h=function(){function e(){Object(l["a"])(this,e)}return Object(u["a"])(e,[{key:"columns",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",m("/api/columns"));case 1:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"select",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",f("/api/select",t));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"insert",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",f("/api/insert",t));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"update",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",f("/api/update",t));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"delete",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",f("/api/delete",t));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}(),g=new h,b=r("21a6"),v=r.n(b),w=r("1146"),y=r.n(w),x={name:"app",data:function(){return{searchField:[],tableField:[],query:{offset:0,limit:0},tableData:[],recordTotal:0,currentPage:1,pageSize:10,currentRow:null,dialogFormTitle:"数据表单",formLabelWidth:"120px",dialogFormVisible:!1,dialogForm:{}}},created:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.initLayout(),t.next=3,e.loadRecords();case 3:case"end":return t.stop()}}),t)})))()},methods:{initLayout:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,n,a,o,i,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,g.columns();case 2:for(r=t.sent,n=r.data,a=0,o=0;o<n.length;o++)i=n[o],l={_id:++a,column:i.column,fieldName:i.fieldName},i["search"]&&e.searchField.push(l),e.tableField.push(l);case 6:case"end":return t.stop()}}),t)})))()},loadRecords:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.query.offset=(e.currentPage-1)*e.pageSize,e.query.limit=e.pageSize,t.next=4,g.select(e.query);case 4:if(r=t.sent,200==r.status){t.next=8;break}return e.$message.error("请检查网络，数据加载失败!"),t.abrupt("return");case 8:e.tableData=r.data.list,e.recordTotal=r.data.total;case 10:case"end":return t.stop()}}),t)})))()},onSearch:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.loadRecords();case 2:case"end":return t.stop()}}),t)})))()},handleSizeChange:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.pageSize=e,r.next=3,t.loadRecords();case 3:case"end":return r.stop()}}),r)})))()},handleCurrentChange:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.currentPage=e,r.next=3,t.loadRecords();case 3:case"end":return r.stop()}}),r)})))()},handleSelectChange:function(e){this.currentRow=e},doAddRecord:function(){this.dialogFormTitle="新增数据",this.dialogFormVisible=!0,this.dialogForm={}},doEditRecord:function(){this.dialogFormTitle="修改数据表单",null!=this.currentRow?(this.dialogForm=JSON.parse(JSON.stringify(this.currentRow)),this.dialogFormVisible=!0):this.$message({message:"请先选择要编译的项!",type:"warning"})},doDeleleRecord:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(null!=e.currentRow){t.next=3;break}return e.$message({message:"请先选择要删除的项!",type:"warning"}),t.abrupt("return");case 3:return t.next=5,e.$confirm("此操作将删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((function(){}));case 5:if(r=t.sent,"confirm"!=r){t.next=14;break}return n=JSON.parse(JSON.stringify(e.currentRow)),t.next=10,g.delete(n);case 10:return a=t.sent,200==a.status?e.$message({type:"success",message:"删除成功!"}):e.$message.error("删除失败"),t.next=14,e.loadRecords();case 14:case"end":return t.stop()}}),t)})))()},doExportRecords:function(){var e=y.a.utils.json_to_sheet(this.tableData),t=y.a.utils.book_new();y.a.utils.book_append_sheet(t,e,"sheet1");var r=y.a.write(t,{bookType:"xlsx",type:"array"});try{v.a.saveAs(new Blob([r],{type:"application/octet-stream"}),"sheet.xlsx")}catch(n){console.log(n),this.$message.error("导出失败，请按下 F12 查看控制台日志")}},doDialogFormSave:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r={},"新增数据"!=e.dialogFormTitle){t.next=7;break}return t.next=4,g.insert(e.dialogForm);case 4:r=t.sent,t.next=10;break;case 7:return t.next=9,g.update(e.dialogForm);case 9:r=t.sent;case 10:return 200==r.status?e.$message({message:"保存成功",type:"success"}):(console.log(r),e.$message.error("保存失败")),t.next=13,e.loadRecords();case 13:e.dialogFormVisible=!1;case 14:case"end":return t.stop()}}),t)})))()},doDialogFormCancel:function(){this.dialogFormVisible=!1,this.dialogForm={}}}},R=x,k=(r("034f"),r("2877")),F=Object(k["a"])(R,a,o,!1,null,null,null),j=F.exports,O=r("5c96"),_=r.n(O);r("0fae");n["default"].use(_.a),n["default"].config.productionTip=!1,new n["default"]({render:function(e){return e(j)}}).$mount("#app")},"85ec":function(e,t,r){}});
//# sourceMappingURL=app.f9c33ada.js.map